<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo - Ranking Productos 2025</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 30px 90px rgba(0,0,0,0.5);
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 3.5em;
            margin-bottom: 15px;
            font-weight: 900;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.3em;
        }

        /* CONTROLES INTERACTIVOS */
        .controls-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            color: white;
        }

        .controls-section h2 {
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .search-box input {
            flex: 1;
            min-width: 300px;
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .search-box button {
            padding: 15px 30px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .filter-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 12px 25px;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn:hover {
            background: white;
            color: #667eea;
        }

        .filter-btn.active {
            background: white;
            color: #667eea;
            transform: scale(1.05);
        }

        /* STATS CARDS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-card .subvalue {
            font-size: 0.95em;
            opacity: 0.8;
        }

        .stat-card.martinez {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stat-card.nunez {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        /* SECCIONES */
        .section {
            margin-bottom: 60px;
        }

        .section h2 {
            color: #667eea;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
            margin-bottom: 35px;
            font-size: 2.2em;
            font-weight: 700;
        }

        /* TABLAS */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px;
            text-align: left;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 1px;
            cursor: pointer;
            user-select: none;
        }

        th:hover {
            background: linear-gradient(135deg, #5568d3 0%, #653a8b 100%);
        }

        td {
            padding: 18px;
            border-bottom: 1px solid #eee;
        }

        tr:nth-child(even) {
            background: #f8f9ff;
        }

        tr:hover {
            background: #e8ecff;
        }

        .highlight {
            background: #fff3cd !important;
            font-weight: bold;
        }

        .chart-container {
            background: #f8f9ff;
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 35px;
            position: relative;
            height: 500px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #666;
        }

        .comparison-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .comparison-card h3 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .comparison-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .comparison-item .label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .comparison-item .value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .comparison-item.martinez .value {
            color: #f5576c;
        }

        .comparison-item.nunez .value {
            color: #4facfe;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Dashboard Interactivo - Ranking 2025</h1>
        <p class="subtitle">An√°lisis Completo con Filtros | Mart√≠nez vs N√∫√±ez</p>

        <!-- CONTROLES INTERACTIVOS -->
        <div class="controls-section">
            <h2>üéØ Selector de Local y Filtros</h2>

            <!-- SELECTOR DE LOCAL -->
            <div style="margin-bottom: 25px;">
                <h3 style="margin-bottom: 15px; font-size: 1.2em;">üìç Ver datos de:</h3>
                <div class="filter-buttons">
                    <button class="filter-btn local-btn active" onclick="changeLocal('comparativo')" data-local="comparativo">üìä Comparativo MZ vs NU</button>
                    <button class="filter-btn local-btn" onclick="changeLocal('martinez')" data-local="martinez">üè¢ Solo Mart√≠nez</button>
                    <button class="filter-btn local-btn" onclick="changeLocal('nunez')" data-local="nunez">üè¢ Solo N√∫√±ez</button>
                </div>
            </div>

            <!-- BUSCADOR -->
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar producto (ej: caf√©, botana, taco res, margarita...)">
                <button onclick="searchProduct()">Buscar</button>
                <button onclick="clearSearch()">Limpiar</button>
            </div>

            <!-- FILTROS POR CATEGOR√çA MAXIREST -->
            <div style="margin-top: 20px;">
                <h3 style="margin-bottom: 15px; font-size: 1.2em;">üè∑Ô∏è Filtrar por categor√≠a:</h3>
                <div class="filter-buttons">
                    <button class="filter-btn cat-btn active" onclick="filterCategory('todas')">Todas</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('Bebidas s/a')">üçπ Bebidas</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('Comida')">üçΩÔ∏è Comida</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('Tacos')">üåÆ Tacos</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('Postres')">üç∞ Postres</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('Salsas')">üå∂Ô∏è Salsas</button>
                    <button class="filter-btn cat-btn" onclick="filterCategory('UPGRADE Tequila')">ü•É Upgrades</button>
                </div>
            </div>
        </div>

        <!-- RESULTADO DE B√öSQUEDA -->
        <div id="searchResults" style="display: none;">
            <!-- Aqu√≠ se mostrar√°n los resultados -->
        </div>

        <!-- STATS CARDS -->
        <div class="stats-grid">
            <div class="stat-card martinez">
                <h3>Mart√≠nez - Facturaci√≥n</h3>
                <div class="value">$943M</div>
                <div class="subvalue">ARS Total A√±o 2025</div>
            </div>
            <div class="stat-card nunez">
                <h3>N√∫√±ez - Facturaci√≥n</h3>
                <div class="value">$455M</div>
                <div class="subvalue">ARS Total A√±o 2025</div>
            </div>
            <div class="stat-card martinez">
                <h3>Mart√≠nez - Unidades</h3>
                <div class="value" id="unidadesMZ">89.590</div>
                <div class="subvalue">Productos Vendidos</div>
            </div>
            <div class="stat-card nunez">
                <h3>N√∫√±ez - Unidades</h3>
                <div class="value" id="unidadesNU">43.379</div>
                <div class="subvalue">Productos Vendidos</div>
            </div>
        </div>

        <!-- TABLA COMPLETA FILTRABLE -->
        <div class="section">
            <h2 id="tableTitle">üìä Ranking Completo de Productos - Comparativo</h2>
            <p style="margin-bottom: 20px; color: #666;">Haz clic en los encabezados para ordenar. <span id="filterStatus">Mostrando: Todas las categor√≠as</span></p>

            <div style="overflow-x: auto;">
                <table id="productsTable">
                    <thead id="tableHeader">
                        <!-- Se generar√° din√°micamente seg√∫n el local -->
                    </thead>
                    <tbody id="tableBody">
                        <!-- Se llenar√° din√°micamente -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // DATOS COMPLETOS - 193 productos MZ + 205 productos NU
        const productosMZ = [{"nombre":"Agua sin gas","categoria":"Bebidas s/a","unidades":4524,"venta":12365068.7},{"nombre":"Agua con gas","categoria":"Bebidas s/a","unidades":1254,"venta":3379097.11},{"nombre":"Pepsi light","categoria":"Bebidas s/a","unidades":2,"venta":6700},{"nombre":"7up","categoria":"Bebidas s/a","unidades":1,"venta":3050},{"nombre":"7up free","categoria":"Bebidas s/a","unidades":1,"venta":3050},{"nombre":"Mirinda","categoria":"Bebidas s/a","unidades":1,"venta":3350},{"nombre":"Paso Tonica","categoria":"Bebidas s/a","unidades":2,"venta":6700},{"nombre":"Paso DLT pomelo","categoria":"Bebidas s/a","unidades":13,"venta":25901.28},{"nombre":"Corona","categoria":"Bebidas s/a","unidades":2152,"venta":11220430.4},{"nombre":"Stella","categoria":"Bebidas s/a","unidades":28,"venta":140120},{"nombre":"Michelada","categoria":"Bebidas s/a","unidades":481,"venta":2745368.93},{"nombre":"Caipi","categoria":"Bebidas s/a","unidades":6,"venta":47400},{"nombre":"Margarita FROZEN","categoria":"Bebidas s/a","unidades":4816,"venta":23678808.1},{"nombre":"Caipiroska","categoria":"Bebidas s/a","unidades":299,"venta":2231786.76},{"nombre":"Caipiroska maracuya","categoria":"Bebidas s/a","unidades":511,"venta":4379611.45},{"nombre":"Caipirinha","categoria":"Bebidas s/a","unidades":303,"venta":2309837.27},{"nombre":"Caipirinha maracuya","categoria":"Bebidas s/a","unidades":146,"venta":1285783.68},{"nombre":"Daiquiri","categoria":"Bebidas s/a","unidades":461,"venta":3591063.67},{"nombre":"Mojito","categoria":"Bebidas s/a","unidades":381,"venta":2973735},{"nombre":"Mojito maracuya","categoria":"Bebidas s/a","unidades":22,"venta":199200},{"nombre":"Cuba libre","categoria":"Bebidas s/a","unidades":67,"venta":367498.9},{"nombre":"Fernet cola","categoria":"Bebidas s/a","unidades":269,"venta":1451177.55},{"nombre":"MEXICAN Bulldog","categoria":"Bebidas s/a","unidades":889,"venta":15556818},{"nombre":"Medio Mexican","categoria":"Bebidas s/a","unidades":71,"venta":606536.85},{"nombre":"TEXAS Bulldog","categoria":"Bebidas s/a","unidades":222,"venta":4331384.5},{"nombre":"Medio texas","categoria":"Bebidas s/a","unidades":27,"venta":235628.29},{"nombre":"Limenta","categoria":"Bebidas s/a","unidades":5,"venta":39095},{"nombre":"Gin tonic","categoria":"Bebidas s/a","unidades":532,"venta":3758173.88},{"nombre":"Negroni","categoria":"Bebidas s/a","unidades":81,"venta":611636.96},{"nombre":"Aperol Spritz","categoria":"Bebidas s/a","unidades":430,"venta":3400000},{"nombre":"Campari","categoria":"Bebidas s/a","unidades":155,"venta":1077132.53},{"nombre":"Pisco sour","categoria":"Bebidas s/a","unidades":137,"venta":1191085},{"nombre":"Old Fashioned","categoria":"Bebidas s/a","unidades":16,"venta":133110.19},{"nombre":"Cynar julep","categoria":"Bebidas s/a","unidades":227,"venta":1774411.86},{"nombre":"Andes Negra","categoria":"Bebidas s/a","unidades":44,"venta":238800.02},{"nombre":"Skyy","categoria":"Bebidas s/a","unidades":2,"venta":8400},{"nombre":"Ron Barcelo","categoria":"Bebidas s/a","unidades":1,"venta":3450},{"nombre":"Cuervo silver","categoria":"Bebidas s/a","unidades":7,"venta":67120},{"nombre":"DF","categoria":"Bebidas s/a","unidades":88,"venta":189000},{"nombre":"DF Gold","categoria":"Bebidas s/a","unidades":5,"venta":25500},{"nombre":"Absolut","categoria":"Bebidas s/a","unidades":14,"venta":58600},{"nombre":"Johnnie Black","categoria":"Bebidas s/a","unidades":7,"venta":63000},{"nombre":"Jack Daniels","categoria":"Bebidas s/a","unidades":5,"venta":37900},{"nombre":"Beefeater gin","categoria":"Bebidas s/a","unidades":13,"venta":51800},{"nombre":"Cinzano","categoria":"Bebidas s/a","unidades":13,"venta":27000},{"nombre":"Fernet","categoria":"Bebidas s/a","unidades":1,"venta":3450},{"nombre":"Jagermeister","categoria":"Bebidas s/a","unidades":6,"venta":29050.08},{"nombre":"Malibu","categoria":"Bebidas s/a","unidades":2,"venta":7900},{"nombre":"Patron cafe","categoria":"Bebidas s/a","unidades":1,"venta":15250},{"nombre":"Cuervo gold","categoria":"Bebidas s/a","unidades":19,"venta":190690},{"nombre":"Patron reposado","categoria":"Bebidas s/a","unidades":4,"venta":96000},{"nombre":"Paloma","categoria":"Bebidas s/a","unidades":33,"venta":387551.38},{"nombre":"Margarita Agave","categoria":"Bebidas s/a","unidades":282,"venta":3510756.5},{"nombre":"Mojito Picante","categoria":"Bebidas s/a","unidades":57,"venta":692450},{"nombre":"Oaxacan Old Fashioned","categoria":"Bebidas s/a","unidades":20,"venta":290300},{"nombre":"Copa vino","categoria":"Bebidas s/a","unidades":167,"venta":1051608.84},{"nombre":"Licuado","categoria":"Bebidas s/a","unidades":511,"venta":2442848.34},{"nombre":"Limonada","categoria":"Bebidas s/a","unidades":4507,"venta":19188201.9},{"nombre":"J. Naranja","categoria":"Bebidas s/a","unidades":238,"venta":1143271.39},{"nombre":"Jugo Pomelo","categoria":"Bebidas s/a","unidades":72,"venta":363250},{"nombre":"Negroni Agave","categoria":"Bebidas s/a","unidades":60,"venta":520910.95},{"nombre":"Capiroska Picante","categoria":"Bebidas s/a","unidades":45,"venta":474101},{"nombre":"Limonada Jarra 1,5","categoria":"Bebidas s/a","unidades":616,"venta":5318308.01},{"nombre":"Corona DELI","categoria":"Bebidas s/a","unidades":2,"venta":12000},{"nombre":"Luna malbec","categoria":"Bebidas s/a","unidades":55,"venta":670947.06},{"nombre":"Luna chardonnay","categoria":"Bebidas s/a","unidades":26,"venta":364745},{"nombre":"Cordero cabernet","categoria":"Bebidas s/a","unidades":24,"venta":329350},{"nombre":"Santa Julia chenin dulce","categoria":"Bebidas s/a","unidades":12,"venta":165745},{"nombre":"Lagarde malbec","categoria":"Bebidas s/a","unidades":6,"venta":137050},{"nombre":"Pispi blend","categoria":"Bebidas s/a","unidades":2,"venta":36946.65},{"nombre":"La Linda extra brut","categoria":"Bebidas s/a","unidades":4,"venta":92800},{"nombre":"Nicasia malbec","categoria":"Bebidas s/a","unidades":17,"venta":418630},{"nombre":"Jagerinha","categoria":"Bebidas s/a","unidades":8,"venta":94550},{"nombre":"Baileys Frozen","categoria":"Bebidas s/a","unidades":4,"venta":50955},{"nombre":"AD Absolut","categoria":"Bebidas s/a","unidades":8,"venta":6000},{"nombre":"Marga","categoria":"Bebidas s/a","unidades":635,"venta":3733850.95},{"nombre":"AD Maracuya","categoria":"Bebidas s/a","unidades":2,"venta":2000},{"nombre":"Sombrero Negro silver","categoria":"Bebidas s/a","unidades":3,"venta":15500},{"nombre":"Corralejo bco","categoria":"Bebidas s/a","unidades":1,"venta":9700},{"nombre":"DF Silver","categoria":"Bebidas s/a","unidades":12,"venta":60000},{"nombre":"Stella lata","categoria":"Bebidas s/a","unidades":10,"venta":52500},{"nombre":"Mezcal DF","categoria":"Bebidas s/a","unidades":4,"venta":37785},{"nombre":"ADTonica","categoria":"Bebidas s/a","unidades":13,"venta":44300},{"nombre":"Mint Julep","categoria":"Bebidas s/a","unidades":15,"venta":141300},{"nombre":"Bloody Mary","categoria":"Bebidas s/a","unidades":43,"venta":432775.91},{"nombre":"Brandy Crusta","categoria":"Bebidas s/a","unidades":10,"venta":98200},{"nombre":"Don Julio blanco","categoria":"Bebidas s/a","unidades":3,"venta":52800},{"nombre":"Bucket Corona","categoria":"Bebidas s/a","unidades":171,"venta":3520545.59},{"nombre":"Mezcal Ojo de Tigre","categoria":"Bebidas s/a","unidades":4,"venta":29100},{"nombre":"Sombrero Negro gold","categoria":"Bebidas s/a","unidades":8,"venta":39925.02},{"nombre":"Mexic BEER","categoria":"Bebidas s/a","unidades":1529,"venta":5960122.09},{"nombre":"Scotch BEER","categoria":"Bebidas s/a","unidades":671,"venta":2557039.46},{"nombre":"IPA BEER","categoria":"Bebidas s/a","unidades":1166,"venta":4769723.22},{"nombre":"Mexic (Lata)","categoria":"Bebidas s/a","unidades":136,"venta":514647.17},{"nombre":"Scotch Ness (Lata)","categoria":"Bebidas s/a","unidades":71,"venta":295392.99},{"nombre":"Honey (Lata)","categoria":"Bebidas s/a","unidades":76,"venta":280654.45},{"nombre":"Ipa (Lata)","categoria":"Bebidas s/a","unidades":201,"venta":688267.04},{"nombre":"Golden (Lata)","categoria":"Bebidas s/a","unidades":14,"venta":42075},{"nombre":"Red Ipa (Lata)","categoria":"Bebidas s/a","unidades":230,"venta":639571.22},{"nombre":"Coca","categoria":"Bebidas s/a","unidades":2749,"venta":8798438.6},{"nombre":"Coca Zero","categoria":"Bebidas s/a","unidades":3058,"venta":9890859.03},{"nombre":"Sprite","categoria":"Bebidas s/a","unidades":631,"venta":2011707.88},{"nombre":"Sprite Zero","categoria":"Bebidas s/a","unidades":448,"venta":1461015.05},{"nombre":"Schw Tonica","categoria":"Bebidas s/a","unidades":82,"venta":266350},{"nombre":"Schw Pom Zero","categoria":"Bebidas s/a","unidades":92,"venta":299450},{"nombre":"Fanta Zero","categoria":"Bebidas s/a","unidades":202,"venta":564414.26},{"nombre":"Ronda Salsas","categoria":"Comida","unidades":70,"venta":168620},{"nombre":"Mini Burritos x3","categoria":"Comida","unidades":2468,"venta":38797080},{"nombre":"Quesadillas","categoria":"Comida","unidades":760,"venta":9344154.95},{"nombre":"Quesadilla Pollo","categoria":"Comida","unidades":1056,"venta":15571279.7},{"nombre":"Quesadilla Res","categoria":"Comida","unidades":344.5,"venta":4936750.14},{"nombre":"Media Quesa Pollo","categoria":"Comida","unidades":95,"venta":638084.69},{"nombre":"Media Quesa","categoria":"Comida","unidades":36,"venta":215093},{"nombre":"Media Quesa Res","categoria":"Comida","unidades":48,"venta":344150.13},{"nombre":"Kid Burrito","categoria":"Comida","unidades":104,"venta":1174677.48},{"nombre":"Quesadilla Veggie","categoria":"Comida","unidades":261,"venta":3535356.4},{"nombre":"Media Quesa Veggie","categoria":"Comida","unidades":35,"venta":206150},{"nombre":"Nachos Tex Mex","categoria":"Comida","unidades":1339,"venta":22026363},{"nombre":"Nachos Agave","categoria":"Comida","unidades":573,"venta":8925563.12},{"nombre":"Mix Fajitas","categoria":"Comida","unidades":1060,"venta":48793590},{"nombre":"Medio Mix Fajitas","categoria":"Comida","unidades":464,"venta":10726467.4},{"nombre":"Fajitas Res","categoria":"Comida","unidades":255.5,"venta":12348584.8},{"nombre":"Medio Fajitas Res","categoria":"Comida","unidades":169,"venta":3741024.71},{"nombre":"Fajitas de Pollo","categoria":"Comida","unidades":165,"venta":8082925.92},{"nombre":"Medio Fajitas Pollo","categoria":"Comida","unidades":35,"venta":683672.6},{"nombre":"Fajitas Veggie","categoria":"Comida","unidades":31,"venta":1180312.32},{"nombre":"Medio Fajitas Veggie","categoria":"Comida","unidades":35,"venta":578539.26},{"nombre":"Botana","categoria":"Comida","unidades":4501,"venta":179685160},{"nombre":"Media Botana","categoria":"Comida","unidades":125,"venta":2447303.69},{"nombre":"Ensalada Caesar SIN pollo","categoria":"Comida","unidades":4,"venta":39701.28},{"nombre":"Ensalada Caesar c pollo","categoria":"Comida","unidades":169,"venta":1992990.03},{"nombre":"Ensalada Agave","categoria":"Comida","unidades":339,"venta":5269689.91},{"nombre":"Papas Fritas","categoria":"Comida","unidades":812,"venta":6219680.76},{"nombre":"Cubiertos","categoria":"Comida","unidades":12,"venta":332640},{"nombre":"Flautas","categoria":"Comida","unidades":1580,"venta":12433004.1},{"nombre":"PROM Flauta","categoria":"Comida","unidades":35,"venta":106211.93},{"nombre":"Kids Quesadilla","categoria":"Comida","unidades":215,"venta":2956669.61},{"nombre":"Kids Flauta","categoria":"Comida","unidades":214,"venta":2851827.04},{"nombre":"Adic Queso fundido","categoria":"Comida","unidades":48,"venta":210160},{"nombre":"Huevos Rancheros","categoria":"Comida","unidades":248,"venta":2075623.76},{"nombre":"Wrap Pollo","categoria":"Comida","unidades":210,"venta":3238058.25},{"nombre":"Wrap Veggie","categoria":"Comida","unidades":92,"venta":1304111.76},{"nombre":"Choclo","categoria":"Comida","unidades":252,"venta":1344253.14},{"nombre":"Chilly Poppers","categoria":"Comida","unidades":244,"venta":1771988.42},{"nombre":"Guacamole strips","categoria":"Comida","unidades":1676,"venta":19782474.7},{"nombre":"Ensalada Tijuana","categoria":"Comida","unidades":125,"venta":1774875.6},{"nombre":"Guacamole 300gr","categoria":"Comida","unidades":21,"venta":234350},{"nombre":"Guacamole 500gr","categoria":"Comida","unidades":4,"venta":71750},{"nombre":"PAQ Tortilla trigo GR","categoria":"Comida","unidades":1,"venta":9650},{"nombre":"Nachos C","categoria":"Comida","unidades":43,"venta":1013696.05},{"nombre":"Nachos G","categoria":"Comida","unidades":31,"venta":655572.09},{"nombre":"Fajitas C","categoria":"Comida","unidades":29,"venta":1696250},{"nombre":"Fajitas G","categoria":"Comida","unidades":57,"venta":3179252.94},{"nombre":"Botana C","categoria":"Comida","unidades":139,"venta":6753614.03},{"nombre":"Botana G","categoria":"Comida","unidades":427,"venta":19719825.9},{"nombre":"Burro XL Carnitas","categoria":"Comida","unidades":974,"venta":18550905.3},{"nombre":"Burro XL Pollo","categoria":"Comida","unidades":378,"venta":7195812.2},{"nombre":"Burro XL Veggie","categoria":"Comida","unidades":202,"venta":3770879.13},{"nombre":"Burro XL Cerdo","categoria":"Comida","unidades":448,"venta":8456187.1},{"nombre":"Quesa Hongos","categoria":"Comida","unidades":272.5,"venta":3732848.58},{"nombre":"Quesa Cerdo","categoria":"Comida","unidades":30,"venta":443987.83},{"nombre":"Quesa Lango","categoria":"Comida","unidades":116,"venta":1976390.13},{"nombre":"Te","categoria":"Postres","unidades":29,"venta":60992.91},{"nombre":"Helado","categoria":"Postres","unidades":15,"venta":72656.41},{"nombre":"Medio helado","categoria":"Postres","unidades":112,"venta":213124.26},{"nombre":"Key lime pie","categoria":"Postres","unidades":336,"venta":2511454.67},{"nombre":"Copa oreo","categoria":"Postres","unidades":68,"venta":410480.64},{"nombre":"Sundae","categoria":"Postres","unidades":3,"venta":16150},{"nombre":"Tacos sundae","categoria":"Postres","unidades":114,"venta":637149.52},{"nombre":"Volcan chocolate","categoria":"Postres","unidades":1176,"venta":8858747.18},{"nombre":"Volcan picante","categoria":"Postres","unidades":76,"venta":557371.73},{"nombre":"Volcan dulce de leche","categoria":"Postres","unidades":364,"venta":2770485.47},{"nombre":"Cafe Lavazza","categoria":"Postres","unidades":945,"venta":2977028.19},{"nombre":"Taco Oreo","categoria":"Postres","unidades":124,"venta":600409.75},{"nombre":"Botellita Repicante","categoria":"Merchandising","unidades":2,"venta":29300},{"nombre":"Botellita Picante ahumado","categoria":"Merchandising","unidades":7,"venta":99875},{"nombre":"PAQ Tortillas Maiz","categoria":"Mercaderia","unidades":20,"venta":208150},{"nombre":"PAQ Tortillas Trigo CH","categoria":"Mercaderia","unidades":11,"venta":96150},{"nombre":"AD Cuervo bco","categoria":"UPGRADE Tequila","unidades":50,"venta":269000.01},{"nombre":"AD Cuervo dor","categoria":"UPGRADE Tequila","unidades":28,"venta":137752.64},{"nombre":"AD Cuervo Tradic","categoria":"UPGRADE Tequila","unidades":7,"venta":50500},{"nombre":"AD Ojo Tigre","categoria":"UPGRADE Tequila","unidades":1,"venta":2570},{"nombre":"Taco Res","categoria":"Tacos","unidades":5695,"venta":26882122.9},{"nombre":"Taco Pollo","categoria":"Tacos","unidades":3238,"venta":15446039.2},{"nombre":"Taco Cerdo","categoria":"Tacos","unidades":1599,"venta":9106222.44},{"nombre":"Taco Veggie","categoria":"Tacos","unidades":891,"venta":4238859.4},{"nombre":"Taco Langostino","categoria":"Tacos","unidades":1506,"venta":8573160.47},{"nombre":"Taco Pastor","categoria":"Tacos","unidades":2628,"venta":14744235.1},{"nombre":"Taco Gobernador","categoria":"Tacos","unidades":2021,"venta":11362426.9},{"nombre":"Tacos Clasicos","categoria":"Tacos","unidades":2968,"venta":41936903.1},{"nombre":"Tacos Agave","categoria":"Tacos","unidades":3249,"venta":55566711.5},{"nombre":"Taco Pescado","categoria":"Tacos","unidades":308,"venta":1687406.15},{"nombre":"Guacamole","categoria":"Salsas","unidades":468,"venta":1154732.05}]
;

        // Cambiar vista de local
        function changeLocal(local) {
            currentLocal = local;

            // Actualizar botones
            document.querySelectorAll('.local-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Actualizar t√≠tulo
            const titles = {
                'comparativo': 'üìä Ranking Completo de Productos - Comparativo',
                'martinez': 'üè¢ Ranking Completo de Productos - Mart√≠nez',
                'nunez': 'üè¢ Ranking Completo de Productos - N√∫√±ez'
            };
            document.getElementById('tableTitle').textContent = titles[local];

            // Actualizar encabezados y tabla
            updateTableHeaders();
            applyFilters();
        }

        // Actualizar encabezados seg√∫n local
        function updateTableHeaders() {
            const thead = document.getElementById('tableHeader');

            if (currentLocal === 'comparativo') {
                thead.innerHTML = `
                    <tr>
                        <th onclick="sortTable(0)">#</th>
                        <th onclick="sortTable(1)">Producto</th>
                        <th onclick="sortTable(2)">Categor√≠a</th>
                        <th onclick="sortTable(3)">MZ Facturaci√≥n</th>
                        <th onclick="sortTable(4)">MZ Unidades</th>
                        <th onclick="sortTable(5)">NU Facturaci√≥n</th>
                        <th onclick="sortTable(6)">NU Unidades</th>
                        <th onclick="sortTable(7)">Total ARS</th>
                    </tr>
                `;
            } else if (currentLocal === 'martinez') {
                thead.innerHTML = `
                    <tr>
                        <th onclick="sortTable(0)">#</th>
                        <th onclick="sortTable(1)">Producto</th>
                        <th onclick="sortTable(2)">Categor√≠a</th>
                        <th onclick="sortTable(3)">Facturaci√≥n ARS</th>
                        <th onclick="sortTable(4)">Unidades</th>
                        <th onclick="sortTable(5)">Precio Promedio</th>
                    </tr>
                `;
            } else { // nunez
                thead.innerHTML = `
                    <tr>
                        <th onclick="sortTable(0)">#</th>
                        <th onclick="sortTable(1)">Producto</th>
                        <th onclick="sortTable(2)">Categor√≠a</th>
                        <th onclick="sortTable(3)">Facturaci√≥n ARS</th>
                        <th onclick="sortTable(4)">Unidades</th>
                        <th onclick="sortTable(5)">Precio Promedio</th>
                    </tr>
                `;
            }
        }

        // Combinar productos de ambos locales
        function combineProducts() {
            const combined = {};

            productosMZ.forEach(p => {
                const key = p.nombre.toLowerCase();
                if (!combined[key]) {
                    combined[key] = {
                        nombre: p.nombre,
                        categoria: p.categoria,
                        mzVenta: 0,
                        mzUnidades: 0,
                        nuVenta: 0,
                        nuUnidades: 0
                    };
                }
                combined[key].mzVenta = p.venta;
                combined[key].mzUnidades = p.unidades;
            });

            productosNU.forEach(p => {
                const key = p.nombre.toLowerCase();
                if (!combined[key]) {
                    combined[key] = {
                        nombre: p.nombre,
                        categoria: p.categoria,
                        mzVenta: 0,
                        mzUnidades: 0,
                        nuVenta: 0,
                        nuUnidades: 0
                    };
                }
                combined[key].nuVenta = p.venta;
                combined[key].nuUnidades = p.unidades;
            });

            return Object.values(combined).map(p => ({
                ...p,
                totalVenta: p.mzVenta + p.nuVenta
            })).sort((a, b) => b.totalVenta - a.totalVenta);
        }

        allProducts = combineProducts();

        // Renderizar tabla seg√∫n local seleccionado
        function renderTable(products) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            products.forEach((p, index) => {
                const row = tbody.insertRow();

                if (currentLocal === 'comparativo') {
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td><strong>${p.nombre}</strong></td>
                        <td>${p.categoria}</td>
                        <td>$${formatNumber(p.mzVenta)}</td>
                        <td>${formatNumber(p.mzUnidades)}</td>
                        <td>$${formatNumber(p.nuVenta)}</td>
                        <td>${formatNumber(p.nuUnidades)}</td>
                        <td><strong>$${formatNumber(p.totalVenta)}</strong></td>
                    `;
                } else if (currentLocal === 'martinez') {
                    const precioPromedio = p.mzUnidades > 0 ? p.mzVenta / p.mzUnidades : 0;
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td><strong>${p.nombre}</strong></td>
                        <td>${p.categoria}</td>
                        <td><strong>$${formatNumber(p.mzVenta)}</strong></td>
                        <td>${formatNumber(p.mzUnidades)}</td>
                        <td>$${formatNumber(precioPromedio)}</td>
                    `;
                } else { // nunez
                    const precioPromedio = p.nuUnidades > 0 ? p.nuVenta / p.nuUnidades : 0;
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td><strong>${p.nombre}</strong></td>
                        <td>${p.categoria}</td>
                        <td><strong>$${formatNumber(p.nuVenta)}</strong></td>
                        <td>${formatNumber(p.nuUnidades)}</td>
                        <td>$${formatNumber(precioPromedio)}</td>
                    `;
                }
            });
        }

        // Formatear n√∫meros
        function formatNumber(num) {
            return Math.round(num).toLocaleString('es-AR');
        }

        // Aplicar filtros (categor√≠a + local)
        function applyFilters() {
            let filtered = allProducts;

            // Filtrar por categor√≠a
            if (currentFilter !== 'todas') {
                filtered = allProducts.filter(p => p.categoria === currentFilter);
            }

            // Ordenar seg√∫n local
            if (currentLocal === 'martinez') {
                filtered = filtered.sort((a, b) => b.mzVenta - a.mzVenta);
            } else if (currentLocal === 'nunez') {
                filtered = filtered.sort((a, b) => b.nuVenta - a.nuVenta);
            } else {
                filtered = filtered.sort((a, b) => b.totalVenta - a.totalVenta);
            }

            renderTable(filtered);
            updateFilterStatus();
            document.getElementById('searchResults').style.display = 'none';
        }

        // Actualizar texto de estado
        function updateFilterStatus() {
            const localNames = {
                'comparativo': 'Comparativo',
                'martinez': 'Mart√≠nez',
                'nunez': 'N√∫√±ez'
            };
            const catName = currentFilter === 'todas' ? 'Todas las categor√≠as' : currentFilter;
            document.getElementById('filterStatus').textContent =
                `Mostrando: ${catName} | Local: ${localNames[currentLocal]}`;
        }

        // Filtrar por categor√≠a
        function filterCategory(cat) {
            currentFilter = cat;

            // Actualizar botones
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            applyFilters();
        }

        // Buscar producto
        function searchProduct() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!query) {
                alert('Por favor ingresa un t√©rmino de b√∫squeda');
                return;
            }

            const results = allProducts.filter(p =>
                p.nombre.toLowerCase().includes(query)
            );

            const resultsDiv = document.getElementById('searchResults');

            if (results.length === 0) {
                resultsDiv.innerHTML = '<div class="no-results">‚ùå No se encontraron productos con ese t√©rmino</div>';
                resultsDiv.style.display = 'block';
                return;
            }

            let html = `
                <div class="section">
                    <h2>üîç Resultados de b√∫squeda: "${query}" (${results.length} productos)</h2>
            `;

            results.forEach(p => {
                html += `
                    <div class="comparison-card">
                        <h3>${p.nombre}</h3>
                        <p style="color: #666; margin-bottom: 15px;">Categor√≠a: ${p.categoria}</p>
                        <div class="comparison-grid">
                            <div class="comparison-item martinez">
                                <div class="label">Mart√≠nez - Facturaci√≥n</div>
                                <div class="value">$${formatNumber(p.mzVenta)}</div>
                                <div class="label" style="margin-top: 10px;">Unidades: ${formatNumber(p.mzUnidades)}</div>
                            </div>
                            <div class="comparison-item nunez">
                                <div class="label">N√∫√±ez - Facturaci√≥n</div>
                                <div class="value">$${formatNumber(p.nuVenta)}</div>
                                <div class="label" style="margin-top: 10px;">Unidades: ${formatNumber(p.nuUnidades)}</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; text-align: center; font-size: 1.2em;">
                            <strong>Total: $${formatNumber(p.totalVenta)} ARS</strong>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }

        // Limpiar b√∫squeda
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').style.display = 'none';
        }

        // Ordenar tabla
        let sortDirection = {};
        function sortTable(columnIndex) {
            const table = document.getElementById('productsTable');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            if (!sortDirection[columnIndex]) sortDirection[columnIndex] = 1;
            sortDirection[columnIndex] *= -1;

            rows.sort((a, b) => {
                let aVal = a.cells[columnIndex].textContent;
                let bVal = b.cells[columnIndex].textContent;

                // Si es n√∫mero, comparar como n√∫mero
                aVal = aVal.replace(/[$,]/g, '');
                bVal = bVal.replace(/[$,]/g, '');

                if (!isNaN(aVal) && !isNaN(bVal)) {
                    return sortDirection[columnIndex] * (parseFloat(aVal) - parseFloat(bVal));
                }

                return sortDirection[columnIndex] * aVal.localeCompare(bVal);
            });

            tbody.innerHTML = '';
            rows.forEach(row => tbody.appendChild(row));
        }

        // Inicializar
        updateTableHeaders();
        applyFilters();

        // Enter en b√∫squeda
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchProduct();
            }
        });
    </script>
</body>
</html>